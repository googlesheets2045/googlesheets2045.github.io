<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mufid Jaya Motor</title>
    <link rel="icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjR0kT5nx1F0LdAx1jpUUj3tqER_B9ga8jtu5iaP2b0FbfhYOivs9_5CMcvgTgdFArOHvlL41Vj0Hh6n3yjkd8P-_gWirIemnYV282iV_o0O3SBEfJYF-8Od1dEnrChOnlOee2A_-lPlhLT10z79KHhFGlsUVrnOMLjqu02vxVb5PgN_f7IX0vRAsmwnBw/s16000/icon-192x192.png" type="image/x-icon">
    
    <!-- Preload Critical -->
    <link rel="preconnect" href="https://script.google.com">
    <link rel="dns-prefetch" href="https://script.google.com">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Mufid Motor">
    
    <style>
        body,html{margin:0;padding:0;height:100%;overflow:hidden;background:#fff}
        .loading{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;display:flex;justify-content:center;align-items:center;z-index:9999}
        .spinner{width:30px;height:30px;border:3px solid #f3f3f3;border-top:3px solid #007bff;border-radius:50%;animation:spin 0.6s linear infinite}
        iframe{width:100%;height:100%;border:none}
        .popup{position:fixed;bottom:15px;left:50%;transform:translateX(-50%);background:#fff;padding:12px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.1);text-align:center;z-index:1000;display:none;font-size:14px}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <iframe 
        src="https://script.google.com/macros/s/AKfycbyxlAL5mRmFiKxkBaDCDAdawfeL47SAOal9KpfZRQrb9po1z_TpKga1uEif_4LYJGXJ/exec" 
        id="frame"
        onload="document.getElementById('loading').style.display='none'">
    </iframe>

    <div id="popup" class="popup">
        <div style="margin-bottom:8px;font-weight:bold">Instal Aplikasi?</div>
        <button id="installBtn" style="padding:6px 12px;background:#007bff;color:white;border:none;border-radius:3px;cursor:pointer;font-size:12px">Instal</button>
        <button id="cancelBtn" style="padding:6px 12px;background:#f0f0f0;color:#333;border:none;border-radius:3px;cursor:pointer;margin-left:5px;font-size:12px">Nanti</button>
    </div>

    <script>
        // Ultra Minimal JS - Load Immediately
        let promptEvent;
        const loading = document.getElementById('loading');
        const frame = document.getElementById('frame');
        
        // Hide loading max 1.5s (safety net)
        setTimeout(() => loading.style.display = 'none', 1500);
        
        // Fast Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js');
        }
        
        // PWA Install
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            promptEvent = e;
            setTimeout(() => {
                document.getElementById('popup').style.display = 'block';
            }, 2000);
        });
        
        document.getElementById('installBtn').onclick = () => {
            document.getElementById('popup').style.display = 'none';
            promptEvent?.prompt();
        };
        
        document.getElementById('cancelBtn').onclick = () => {
            document.getElementById('popup').style.display = 'none';
        };
    </script>
</body>
</html>
